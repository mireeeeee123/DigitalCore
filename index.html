<!DOCTYPE html>
<html lang="it" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DigitalCore | Protocollo Operativo 2026</title>
    
    <!-- Preload Font critici -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js" defer></script>

    <style>
        :root { --bg: #ffffff; --ink: #020617; --accent: #10b981; --f-sans: 'Plus Jakarta Sans', sans-serif; }
        body { font-family: var(--f-sans); background-color: var(--bg); color: var(--ink); margin: 0; padding: 0; }
        .bg-dots { background-image: radial-gradient(#e2e8f0 1.5px, transparent 1.5px); background-size: 32px 32px; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid #f1f5f9; }
        .gradient-text { background: linear-gradient(to right, #020617, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* Scratch Card Responsive */
        #scratch-container { position: relative; width: 100%; max-width: 320px; aspect-ratio: 2/1; margin: 0 auto; user-select: none; touch-action: none; }
        #scratch-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 20; border-radius: 20px; cursor: crosshair; }
        .prize-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #f0fdf4; border: 2px dashed var(--accent); border-radius: 20px; z-index: 10; padding: 15px; text-align: center; }
        
        @keyframes pulse-emerald {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        .pulse-live { animation: pulse-emerald 2s infinite; }
        .bento-card { transition: transform 0.3s ease, border-color 0.3s ease; border: 1px solid #f1f5f9; }
        .bento-card:hover { transform: translateY(-5px); border-color: var(--accent); }
        
        /* Fix per evitare scroll orizzontale */
        html, body { overflow-x: hidden; width: 100%; position: relative; }
    </style>
</head>
<body class="antialiased bg-dots">

    <!-- NAVIGATION -->
    <nav class="fixed top-0 w-full z-50 glass h-20 flex items-center justify-between px-6 md:px-16">
        <div class="flex items-center gap-3 cursor-pointer" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
            <div class="w-10 h-10 bg-ink rounded-xl flex items-center justify-center shadow-lg">
                <i data-lucide="zap" class="w-6 h-6 text-accent"></i>
            </div>
            <span class="font-extrabold uppercase tracking-tighter text-xl text-ink">Digital<span class="text-accent">Core</span></span>
        </div>
        
        <div class="hidden lg:flex items-center gap-8">
            <a href="#missione" class="text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-accent transition-colors">Missione</a>
            <a href="#risorse" class="text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-accent transition-colors">Strumenti</a>
            <a href="#protocollo" class="text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-accent transition-colors">Protocollo</a>
        </div>

        <div class="flex items-center gap-4">
            <div class="hidden sm:flex items-center gap-2 px-4 py-2 bg-slate-50 border border-slate-100 rounded-full">
                <div class="w-2 h-2 bg-accent rounded-full pulse-live"></div>
                <span class="text-[10px] font-bold uppercase tracking-widest text-slate-500"><span id="visitor-count">1,242</span> Online</span>
            </div>
            <button id="mobile-menu-toggle" class="lg:hidden p-2 text-ink">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>
    </nav>

    <!-- MOBILE MENU -->
    <div id="mobile-menu" class="fixed inset-0 z-[60] bg-ink/95 backdrop-blur-xl hidden flex-col items-center justify-center gap-8">
        <button id="mobile-menu-close" class="absolute top-6 right-6 text-white"><i data-lucide="x" class="w-8 h-8"></i></button>
        <a href="#missione" class="text-2xl font-black uppercase tracking-widest text-white mobile-link">Missione</a>
        <a href="#risorse" class="text-2xl font-black uppercase tracking-widest text-white mobile-link">Strumenti</a>
        <a href="#protocollo" class="text-2xl font-black uppercase tracking-widest text-white mobile-link">Protocollo</a>
    </div>

    <!-- HERO -->
    <main class="pt-32 md:pt-44 pb-20 px-6 max-w-7xl mx-auto">
        <div class="grid lg:grid-cols-12 gap-12 items-center">
            <div class="lg:col-span-7 text-center lg:text-left flex flex-col items-center lg:items-start">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-emerald-50 border border-emerald-100 rounded-full mb-6">
                    <span class="text-[10px] font-extrabold uppercase tracking-widest text-emerald-700">Unisciti alla nostra Community</span>
                </div>
                <h1 class="text-5xl md:text-8xl font-black text-ink uppercase tracking-tighter leading-[0.85] mb-8">
                    Semplifica. <br><span class="gradient-text">Automatizza.</span> <br>Respira.
                </h1>
                <p class="text-lg md:text-xl text-slate-500 max-w-xl mb-10 font-medium italic">
                    Abbiamo creato questo protocollo per aiutare chiunque a riprendersi il proprio tempo e la propria serenità.
                </p>

                <!-- LEAD FORM -->
                <div id="lead-section" class="w-full max-w-2xl bg-white p-4 rounded-[2rem] border-[4px] border-emerald-500 shadow-2xl transition-transform hover:scale-[1.01]">
                    <form id="lead-form" class="flex flex-col sm:flex-row gap-3">
                        <input type="email" id="lead-email" required placeholder="LA TUA EMAIL QUI..." 
                               class="flex-1 h-16 px-6 bg-emerald-50 rounded-xl focus:outline-none text-lg font-black text-ink placeholder:text-emerald-800/30 border-2 border-transparent focus:border-emerald-200 transition-all uppercase" />
                        <button type="submit" class="h-16 px-8 bg-emerald-500 text-ink text-xs font-black uppercase tracking-widest hover:bg-ink hover:text-white transition-all rounded-xl flex items-center justify-center gap-2">
                            INIZIA ORA <i data-lucide="zap" class="w-5 h-5"></i>
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- ANALISI BLOCK -->
            <div class="lg:col-span-5">
                <div class="bg-ink rounded-[2.5rem] p-8 md:p-10 border border-white/10 shadow-2xl relative overflow-hidden">
                    <div class="relative z-10 space-y-8">
                        <h3 class="text-emerald-400 font-bold text-[10px] uppercase tracking-[0.3em] italic">Analisi della tua Attività</h3>
                        <div class="space-y-6">
                            <div class="flex items-center gap-5">
                                <div class="w-12 h-12 bg-white/5 rounded-xl flex items-center justify-center text-emerald-500"><i data-lucide="search"></i></div>
                                <div><h4 class="text-white font-bold italic">1. Audit Abitudini</h4><p class="text-slate-500 text-xs">Troviamo cosa ti ruba energia.</p></div>
                            </div>
                            <div class="flex items-center gap-5">
                                <div class="w-12 h-12 bg-white/5 rounded-xl flex items-center justify-center text-emerald-500"><i data-lucide="refresh-cw"></i></div>
                                <div><h4 class="text-white font-bold italic">2. Automazione</h4><p class="text-slate-500 text-xs">Colleghiamo tutto per farti respirate.</p></div>
                            </div>
                            <div class="flex items-center gap-5">
                                <div class="w-12 h-12 bg-emerald-500/20 rounded-xl flex items-center justify-center text-emerald-500"><i data-lucide="trending-up"></i></div>
                                <div><h4 class="text-emerald-500 font-bold italic">3. Crescita</h4><p class="text-slate-400 text-xs">Il sistema lavora, tu vivi.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- MISSIONE -->
    <section id="missione" class="py-20 bg-slate-50 border-y border-slate-100 px-6">
        <div class="max-w-7xl mx-auto text-center">
            <h2 class="text-3xl md:text-5xl font-black uppercase tracking-tighter mb-12 italic">Perché <span class="text-emerald-600">DigitalCore</span>?</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                    <i data-lucide="heart" class="w-8 h-8 text-red-500 mx-auto mb-4"></i>
                    <h4 class="font-black uppercase mb-2 italic">Empatia</h4>
                    <p class="text-slate-500 text-sm italic">Siamo stati al tuo posto. Sappiamo cosa significa sentirsi sopraffatti.</p>
                </div>
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                    <i data-lucide="shield-check" class="w-8 h-8 text-emerald-500 mx-auto mb-4"></i>
                    <h4 class="font-black uppercase mb-2 italic">Sicurezza</h4>
                    <p class="text-slate-500 text-sm italic">Usiamo solo strumenti testati che funzionano davvero, ogni giorno.</p>
                </div>
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-100">
                    <i data-lucide="users" class="w-8 h-8 text-blue-500 mx-auto mb-4"></i>
                    <h4 class="font-black uppercase mb-2 italic">Community</h4>
                    <p class="text-slate-500 text-sm italic">Non sei un numero. Entri in un gruppo che condivide e cresce insieme.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- STRUMENTI -->
    <section id="risorse" class="py-20 px-6 max-w-7xl mx-auto">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-6xl font-black uppercase tracking-tighter italic">Il Tuo <span class="text-emerald-600">Kit</span></h2>
        </div>
        <div class="grid md:grid-cols-12 gap-6">
            <div class="md:col-span-8 bento-card bg-white p-10 rounded-[2.5rem]">
                <h4 class="text-2xl font-black uppercase mb-4 italic">Notion: Il Cervello</h4>
                <p class="text-slate-500 italic mb-6">Centralizza tutto: progetti, dati e idee in un unico posto sicuro.</p>
                <a href="https://www.notion.so" target="_blank" class="text-xs font-black uppercase border-b-2 border-emerald-500 pb-1">Configura ora →</a>
            </div>
            <div class="md:col-span-4 bento-card bg-white p-10 rounded-[2.5rem]">
                <h4 class="text-2xl font-black uppercase mb-4 italic">Make: I Flussi</h4>
                <p class="text-slate-500 italic mb-6">Collega le tue app e lascia che lavorino per te 24/7.</p>
                <a href="https://www.make.com" target="_blank" class="text-xs font-black uppercase border-b-2 border-emerald-500 pb-1">Attiva →</a>
            </div>
            <div class="md:col-span-12 bento-card bg-ink p-10 md:p-16 rounded-[3rem] text-white">
                <h4 class="text-4xl font-black uppercase mb-6 italic text-emerald-500">HighLevel: Il Comando</h4>
                <p class="text-slate-400 text-lg mb-8 italic">Gestisci contatti e comunicazioni senza sforzo in un'unica piattaforma.</p>
                <a href="https://www.gohighlevel.com/?fp_ref=vincenzo77" target="_blank" class="inline-flex px-8 py-4 bg-emerald-500 text-ink font-black uppercase rounded-xl">Inizia il Percorso</a>
            </div>
        </div>
    </section>

    <!-- MODALE SCRATCH -->
    <div id="scratch-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center bg-ink/95 backdrop-blur-xl p-6">
        <div id="scratch-card-view" class="bg-white p-10 rounded-[2.5rem] max-w-md w-full text-center">
            <h3 class="text-2xl font-black uppercase mb-8 italic">Un Regalo per Te</h3>
            <div id="scratch-container">
                <div class="prize-content">
                    <span class="text-[10px] font-bold text-emerald-600 mb-2">CONSIGLIO DEL GIORNO:</span>
                    <span id="daily-advice" class="text-lg font-black italic uppercase">...</span>
                </div>
                <canvas id="scratch-canvas"></canvas>
            </div>
            <p class="mt-8 text-[10px] text-slate-400 italic">Grattando accetti i termini della community.</p>
        </div>

        <div id="success-view" class="hidden bg-white p-10 rounded-[2.5rem] max-w-md w-full text-center border-4 border-emerald-500">
            <h3 class="text-3xl font-black uppercase mb-4 italic">Accesso <span class="text-emerald-600">Garantito.</span></h3>
            <p class="text-slate-500 text-sm mb-8 italic">Scarica ora il tuo protocollo tecnico personalizzato.</p>
            <button onclick="generateProtocolPDF()" class="w-full py-5 bg-ink text-white font-black uppercase rounded-xl mb-4">Scarica Protocollo</button>
            <button onclick="location.reload()" class="text-[10px] font-bold uppercase text-slate-300">Chiudi</button>
        </div>
    </div>

    <footer class="py-20 text-center bg-slate-50 border-t border-slate-100">
        <span class="font-black uppercase tracking-tighter text-lg">Digital<span class="text-emerald-500">Core</span></span>
        <p class="text-[9px] text-slate-400 mt-4 italic uppercase tracking-widest">© 2026 Protocollo Operativo Riservato</p>
    </footer>

    <script>
        // Ottimizzazione Caricamento
        window.addEventListener('load', () => {
            if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
            window.scrollTo(0, 0);
            if(typeof lucide !== 'undefined') lucide.createIcons();
        });

        // Visitor Count
        let count = 1242;
        setInterval(() => {
            count += Math.floor(Math.random() * 3) - 1;
            const el = document.getElementById('visitor-count');
            if(el) el.innerText = count.toLocaleString();
        }, 4000);

        // Mobile Menu
        const menu = document.getElementById('mobile-menu');
        document.getElementById('mobile-menu-toggle').onclick = () => menu.classList.remove('hidden');
        document.getElementById('mobile-menu-close').onclick = () => menu.classList.add('hidden');
        document.querySelectorAll('.mobile-link').forEach(l => l.onclick = () => menu.classList.add('hidden'));

        // Form Logic
        const ADVICES = ["Semplifica prima di automatizzare.", "Il tempo è la tua risorsa più scarsa.", "Se lo fai 2 volte, automatizzalo.", "Respira. Il sistema lavora per te."];
        
        document.getElementById('lead-form').onsubmit = async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            btn.disabled = true;
            btn.innerHTML = "...";

            try {
                // Tentativo API, ma proseguiamo comunque per non bloccare l'utente
                await fetch('/api/leads', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: document.getElementById('lead-email').value })
                }).catch(() => console.log("API Offline - Proseguo in locale"));
                
                document.getElementById('scratch-modal').classList.remove('hidden');
                document.getElementById('daily-advice').innerText = ADVICES[Math.floor(Math.random() * ADVICES.length)];
                initScratch();
            } catch (err) {
                console.error(err);
            }
        };

        function initScratch() {
            const container = document.getElementById('scratch-container');
            const canvas = document.getElementById('scratch-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;

            ctx.fillStyle = '#cbd5e1';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = 'bold 14px sans-serif';
            ctx.fillStyle = '#64748b';
            ctx.textAlign = 'center';
            ctx.fillText('GRATTA QUI', canvas.width/2, canvas.height/2 + 5);

            let isDrawing = false;
            const scratch = (e) => {
                if (!isDrawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - rect.left;
                const y = (e.clientY || e.touches[0].clientY) - rect.top;
                ctx.globalCompositeOperation = 'destination-out';
                ctx.beginPath(); ctx.arc(x, y, 30, 0, Math.PI * 2); ctx.fill();
                
                // Check completamento
                const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
                let count = 0;
                for (let i = 3; i < data.length; i += 4) if (data[i] === 0) count++;
                if (count > data.length / 8) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    if(typeof confetti !== 'undefined') confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                    setTimeout(() => {
                        document.getElementById('scratch-card-view').classList.add('hidden');
                        document.getElementById('success-view').classList.remove('hidden');
                    }, 500);
                }
            };

            canvas.onmousedown = canvas.ontouchstart = () => isDrawing = true;
            window.onmouseup = window.ontouchend = () => isDrawing = false;
            canvas.onmousemove = canvas.ontouchmove = scratch;
        }

        function generateProtocolPDF() {
            const w = window.open('', '_blank');
            w.document.write(`<html><body style="font-family:sans-serif;padding:50px;"><h1>Protocollo DigitalCore 2026</h1><p>Fase 1: Audit Abitudini</p><p>Fase 2: Centralizzazione Notion</p><p>Fase 3: Automazione Make</p><p>Fase 4: Scala con HighLevel</p><script>window.print();<\/script></body></html>`);
            w.document.close();
        }
    </script>
</body>
</html>
